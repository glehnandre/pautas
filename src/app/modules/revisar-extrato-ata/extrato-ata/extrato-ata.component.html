<div class="flex flex-col my-4 space-y-4">
    <div
      class="flex flex-col items-center text-xs sm:text-base"
      *ngFor="let processo of sessao.processos"
    >
        <div class="w-full md:w-9/12">
            <div class="flex flex-row text-white">
                <div *ngIf="form?.dataPublicacao" class="flex flex-col bg-primary p-2 items-center space-x-2">
                    <div class="flex flex-row">
                        <mat-icon class="hidden sm:block text-current" [svgIcon]="'heroicons_outline:calendar'"></mat-icon>
                        <span class="text-base sm:text-4xl font-medium">{{ form?.dataPublicacao | date: 'dd'}}</span>
                    </div>
                    <span>{{ form?.dataPublicacao | date: 'MMM/yyyy':'':'pt-BR'}}</span>
                </div>
                <div class="flex flex-col bg-primary p-2 w-full">
                    <span class="text-base sm:text-2xl">
                        {{ processo?.classe }} {{ processo?.numero }} {{ processo?.cadeia}}
                    </span>
                    <div>
                        <span>
                            {{ processo.classe }} {{ processo.numero }}
                            {{ processo.abreviacao }}
                        </span>
                        <span class="font-medium">
                            Relatoria Ministr{{ processo.relator?.genero == 'Masculino' ? 'o': 'a' }}
                            {{ processo.relator?.nome }}
                        </span>
                    </div>
                </div>
            </div>
            <div class="flex flex-col bg-card dar:bg-gray-800 pb-4">
                <div class="mx-2 sm:mx-4 -my-4 sm:-my-2">
                    <hr><div class="flex flex-col sm:flex-row -my-4 sm:-my-2 justify-between space-x-0 sm:space-x-4">
                        <span>
                            REQUERENTE(S):
                            <span class="font-medium" *ngFor="let requerente of filtraEnvolvidos(processo.envolvidos, 'REQUERENTE')">
                                {{ requerente.nome }}
                            </span><br>
                            <span *ngFor="let advogado of filtraEnvolvidos(processo.envolvidos, 'ADVOGAD', 'ATIVO')">
                                {{ advogado.categoria }}:
                                <span class="font-medium">{{ advogado.nome }} | {{ advogado.identificacoes.join(' | ') }} |</span><br>
                            </span><br class="mb-2 sm:my-0">
                        </span>
                        <span>
                            RECORRIDO(A/S):
                            <span class="font-medium" *ngFor="let envolvido of filtraEnvolvidos(processo.envolvidos, 'RECORRID')">
                                {{ envolvido.nome}}
                            </span><br>
                            <span *ngFor="let advogado of filtraEnvolvidos(processo.envolvidos, 'ADVOGAD', 'PASSIVO')">
                                {{ advogado.categoria }}:
                                <span class="font-medium">{{ advogado.nome }} | {{ advogado.identificacoes.join(' | ') }} |</span><br>
                            </span>
                        </span>
                    </div><hr>
                </div>
                <div class="text-center m-4">
                    <h1 class="text-xl font-medium text-primary">Extrato da Ata</h1>
                    <h3 class="font-medium">
                        Sessão {{ sessao?.modalidade}} {{ sessao?.tipo }} {{ sessao?.numero }}/{{ sessao?.ano }} realizada {{
                          (sessao?.data_inicio | date: "dd/mm/yyyy") == (sessao?.data_fim | date: "dd/mm/yyyy")?
                            'no dia ' + (sessao?.data_fim | date: "longDate"):
                            'entre os dias ' + (sessao?.data_inicio | date: "longDate") + ' e ' + (sessao?.data_fim | date: "longDate")
                        }}
                    </h3>
                </div>
                <div class="ml-4 sm:ml-8 md:ml-16 mr-4 text-md">
                    <div class="mb-4 font-medium" [innerHtml]="fraseEMinistros([ata?.presidencia], FrasePresidente)">
                    </div>
                    <div class="mb-8" [innerHtml]="fraseEMinistros(ata?.ministros_presentes, FrasePresentes) + (ata?.outros_presentes ? 'Também presentes à sessão ' + ata?.outros_presentes: '') +  '. '+fraseEMinistros(ata?.ministros_ausentes, FraseAusentes)"></div>
                    <div class="mb-8 text-md flex flex-0 text-justify">
                        {{ ata?.cabecalho }}
                    </div>
                    <div *ngIf="processo?.ministros_impedidos?.length > 0">
                        <p class="leading-tight"> No julgamento do processo <span class="font-medium">{{processo.classe}} {{processo.numero}} {{processo.cadeia}}, </span> <span [innerHtml]=" fraseEMinistros(processo.ministros_impedidos, FraseImpedidos) "></span>
                        <span *ngIf="processo?.ministros_suspeitos?.length > 0">  <span [innerHtml]=" fraseEMinistros(processo.ministros_suspeitos, FraseSuspeitos) "></span></span></p>

                    </div>
                    <div *ngIf="processo?.vistas.length > 0">
                        <hr class="mb-2" />
                        <h4 class="text-primary  font-medium">Pedidos de vista no Julgamento</h4>
                        <div class="">
                            <span *ngFor="let vista of processo?.vistas">
                                <p class="leading-tight">
                                    No dia {{vista.data | date:'dd/MM/yyyy'}} às {{vista.data | date:'hh:mm'}}, houve um pedido de vista feito <span [innerHtml]=" fraseEMinistros([vista.ministro], FraseMinistro) "></span>
                                </p>
                                <div class="prose text-md">
                                    <div [innerHtml]="vista.texto"></div>
                                </div>
                                <p class="leading-tight">
                                    {{vista.sessao.numero}}, {{vista.sessao.ano}}
                                </p>
                                <br>
                            </span>
                        </div>
                    </div>
                    <div *ngIf="processo?.destaques.length > 0">
                        <hr class="mb-2" />
                        <h4 class="text-primary  font-medium">Pedidos de destaque no Julgamento Virtual</h4>
                        <div class="mb-2">
                            <span *ngFor="let destaque of processo?.destaques">
                                <p class="leading-tight ">No dia {{destaque.data | date:'dd/MM/yyyy'}} às {{destaque.data | date:'hh:mm'}}, houve um pedido de destaque do plenário virtual feito <span [innerHtml]=" fraseEMinistros([destaque.ministro], FraseMinistro) "></span>
                                </p>
                                <div class="prose text-md">
                                    <div class="prose prose-h1" [innerHtml] = "destaque.texto"></div>
                                </div>
                                <br>
                            </span>
                        </div>
                    </div>
                    <div *ngIf="processo.capitulos">
                        <hr class="mb-2" />
                        <div *ngFor="let tipo of tiposCapitulo">
                            <div *ngFor="let capitulo of filtraTipos(tipo, processo.capitulos); let capituloIndex = index">
                                <div class="flex flex-col mr-8">
                                        <h4 class="text-primary font-medium">{{capituloIndex+1}}{{ descreveTipo[tipo] }}</h4>
                                        <div [class]="'bg-sentido-'+capitulo.dispositivo?.sentido+' rounded-full px-2 text-white mb-4 mr-2 inline-block'">
                                            {{ capitulo.dispositivo?.nome }}
                                        </div>
                                        <div class="mb-6 text-md flex flex-0 text-justify" [innerHtml]="capitulo?.texto">{{capitulo?.texto}}</div>
                                        <div class="mb-4" *ngIf="capitulo.ministros_divergem.length > 0 ;else unanime" [innerHtml]="fraseEMinistros(capitulo?.ministros_divergem, FraseDivergem)"></div>
                                        <ng-template #unanime>Decisão unânime.</ng-template>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="processo.redator" class="mb-4 font-medium" [innerHtml]="fraseEMinistros([processo?.redator], FraseRedator)">
                        </div>
                    </div>
                    <div class="w-full" *ngIf="processo.suspensoes">
                        <div *ngFor="let suspensao of processo?.suspensoes">
                            <div class="prose text-md ">
                                <p class="font-medium">Adiamento do Julgamento em {{suspensao.data|date:'longDate'}}:</p>
                                <div [innerHtml]="suspensao.texto"></div>
                            </div>
                            <hr>
                        </div>
                    </div>
                </div>
                <footer class="text-center mb-4">
                    <span *ngIf="form">
                        Brasília, {{ form?.dataPublicacao | date: 'longDate' }}
                    </span><br>
                    {{ ata?.secretario }}<br>
                    Assessor(a) Chefe do Plenário
                </footer>
            </div>
        </div>
    </div>
